<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Puzzle Game - TravelVerse</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">

  <style>
    .board, .pieces {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-gap: 4px;
      margin: 20px auto;
      width: 320px;
    }
    .slot, .piece {
      width: 100px;
      height: 100px;
      border: 1px solid #ccc;
      background-size: 300px 300px; /* size of full image */
      cursor: grab;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <div id="navbar-container"></div>

  <div class="container text-center mt-4">
    <h2>ðŸ§© Monument Puzzle</h2>
    <p>Reassemble the Taj Mahal by dragging pieces into place!</p>

    <!-- Puzzle UI -->
    <div id="puzzle-board" class="board"></div>
    <div id="puzzle-pieces" class="pieces"></div>
    <div id="puzzle-feedback" class="mt-3 text-success fw-bold"></div>
  </div>

  <!-- Footer -->
  <div id="footer-container" class="mt-4"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/js/main.js"></script>

  <script>
    // --- Jigsaw Puzzle Logic ---
    document.addEventListener("DOMContentLoaded", function () {
      const image = "assets/images/taj-mahal.png"; // change to your image
      const board = document.getElementById("puzzle-board");
      const pieces = document.getElementById("puzzle-pieces");

      // Create board slots
      for (let i = 0; i < 9; i++) {
        let slot = document.createElement("div");
        slot.className = "slot";
        slot.dataset.index = i;
        board.appendChild(slot);
      }

      // Shuffle pieces
      let indices = [...Array(9).keys()].sort(() => Math.random() - 0.5);
      indices.forEach((i) => {
        let piece = document.createElement("div");
        piece.className = "piece";
        piece.draggable = true;
        piece.style.backgroundImage = `url(${image})`;
        piece.style.backgroundPosition =
          `-${(i % 3) * 100}px -${Math.floor(i / 3) * 100}px`;
        piece.dataset.correct = i;
        pieces.appendChild(piece);
      });

      // Drag & Drop
      document.querySelectorAll(".piece").forEach(p => {
        p.addEventListener("dragstart", e => {
          e.dataTransfer.setData("text", e.target.dataset.correct);
          e.dataTransfer.setData("bg", e.target.style.backgroundPosition);
        });
      });

      document.querySelectorAll(".slot").forEach(slot => {
        slot.addEventListener("dragover", e => e.preventDefault());
        slot.addEventListener("drop", e => {
          e.preventDefault();
          const index = e.dataTransfer.getData("text");
          const bg = e.dataTransfer.getData("bg");
          slot.style.backgroundImage = `url(${image})`;
          slot.style.backgroundPosition = bg;
          slot.dataset.filled = index;
          checkWin();
        });
      });

      function checkWin() {
        const slots = document.querySelectorAll(".slot");
        if ([...slots].every((s, i) => s.dataset.filled == i)) {
          document.getElementById("puzzle-feedback").innerText =
            "ðŸŽ‰ Puzzle Complete! You earned 100 points!";
        }
      }
    });
  </script>
</body>
</html>
